<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WorldConquest.io - Style OpenFront</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Écran de menu -->
  <div id="menuScreen" class="screen active">
    <div class="menu-container">
      <h1 class="game-title">🌍 WorldConquest.io</h1>
      <p class="game-subtitle">Conquérez l'Europe avec vos amis</p>
      
      <div class="menu-form">
        <input type="text" id="playerName" placeholder="Votre pseudo" maxlength="20">
        
        <div class="button-group">
          <button id="createRoomBtn" class="btn btn-primary">Créer une partie</button>
          <button id="joinRoomBtn" class="btn btn-secondary">Rejoindre une partie</button>
        </div>

        <div id="joinRoomForm" class="hidden">
          <input type="text" id="roomCode" placeholder="Code de la room" maxlength="6">
          <button id="confirmJoinBtn" class="btn btn-primary">Rejoindre</button>
        </div>
      </div>

      <div class="info-section">
        <h3>📜 Comment jouer ?</h3>
        <ul>
          <li>🎯 Placez votre base de départ sur la carte</li>
          <li>⚔️ Étendez votre territoire cellule par cellule</li>
          <li>💰 Gagnez de l'or avec vos territoires</li>
          <li>🤝 Attaquez les territoires ennemis adjacents</li>
          <li>👑 Conquérez 80% de la carte pour gagner !</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Écran de lobby -->
  <div id="lobbyScreen" class="screen">
    <div class="lobby-container">
      <h2>🎮 Salle d'attente</h2>
      
      <div class="room-info">
        <div class="room-code-display">
          <span>Code de la room :</span>
          <strong id="displayRoomCode"></strong>
          <button id="copyCodeBtn" class="btn-icon" title="Copier">📋</button>
        </div>
      </div>

      <div class="players-section">
        <h3>Joueurs (👤 <span id="playerCount">0</span>)</h3>
        <div id="playersList" class="players-list"></div>
      </div>

      <div class="lobby-actions">
        <button id="startGameBtn" class="btn btn-primary btn-large">Démarrer la partie</button>
        <button id="leaveLobbyBtn" class="btn btn-secondary">Quitter</button>
      </div>
    </div>
  </div>

  <!-- Écran de placement -->
  <div id="placementScreen" class="screen">
    <div class="placement-overlay">
      <div class="placement-info">
        <h2>🎯 Placez votre base</h2>
        <p>Cliquez sur une zone verte pour placer votre point de départ</p>
        <p class="placement-warning">⚠️ Choisissez stratégiquement, vous ne pourrez pas changer !</p>
        <div class="placement-stats">
          <p>Joueurs prêts: <strong><span id="playersPlaced">0</span> / <span id="totalPlayers">0</span></strong></p>
        </div>
      </div>
    </div>
    
    <!-- Canvas pour la phase de placement -->
    <canvas id="placementCanvas"></canvas>
  </div>

  <!-- Écran de jeu -->
  <div id="gameScreen" class="screen">
    <!-- HUD supérieur -->
    <div class="game-hud">
      <div class="hud-left">
        <div class="player-info">
          <span class="player-name" id="hudPlayerName"></span>
          <span class="player-color" id="hudPlayerColor"></span>
        </div>
        <div class="resource-display">
          <span class="resource">💰 Or: <strong id="hudGold">0</strong></span>
          <span class="resource">📈 Revenu: <strong id="hudIncome">0</strong>/s</span>
          <span class="resource">🏠 Cellules: <strong id="hudCells">0</strong></span>
          <span class="resource">⚔️ Troupes: <strong id="hudTroops">0</strong></span>
        </div>
      </div>
      
      <div class="hud-right">
        <button id="centerBaseBtn" class="btn btn-small">🎯 Centrer</button>
        <button id="statsBtn" class="btn btn-small">📊 Stats</button>
        <button id="leaveGameBtn" class="btn btn-small btn-danger">Quitter</button>
      </div>
    </div>

    <!-- Canvas de jeu -->
    <canvas id="gameCanvas"></canvas>

    <!-- Panneau d'information de la cellule -->
    <div id="cellPanel" class="territory-panel hidden">
      <h3 id="cellInfo">Cellule</h3>
      <div class="territory-stats">
        <p>👤 Propriétaire: <span id="cellOwner">-</span></p>
        <p>⚔️ Troupes: <span id="cellTroops">0</span></p>
        <p>📍 Position: <span id="cellPosition">-</span></p>
      </div>
      
      <div class="territory-actions">
        <div class="action-group">
          <button id="expandBtn" class="btn btn-primary">➕ Conquérir (50💰)</button>
        </div>

        <div class="action-group">
          <label>Renforcer cette cellule</label>
          <div class="input-group">
            <input type="number" id="reinforceCount" min="1" value="10">
            <button id="reinforceBtn" class="btn btn-secondary">🛡️ Renforcer</button>
          </div>
        </div>
      </div>

      <div class="cell-help">
        <p><strong>💡 Conseils :</strong></p>
        <p>• Clic gauche : Sélectionner une cellule</p>
        <p>• Clic droit + drag : Déplacer la carte</p>
        <p>• Molette : Zoomer/Dézoomer</p>
      </div>
    </div>

    <!-- Modal de stats -->
    <div id="statsModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>📊 Statistiques de la partie</h2>
        <div id="statsContent"></div>
      </div>
    </div>
  </div>

  <!-- Messages de notification -->
  <div id="notifications" class="notifications-container"></div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
  <script src="js/network.js"></script>
  <script src="js/mapRenderer.js"></script>
  <script src="js/placement.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/game.js"></script>
  <script src="js/main.js"></script>
</body>
</html>